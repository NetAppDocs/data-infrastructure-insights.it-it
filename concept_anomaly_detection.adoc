---
sidebar: sidebar 
permalink: concept_anomaly_detection.html 
keywords: Anomalies, anomaly, patterns, monitor, alert 
summary: Monitorare le metriche per anomalie 
---
= Monitor di rilevamento delle anomalie
:hardbreaks:
:allow-uri-read: 
:nofooter: 


[role="lead"]
Il rilevamento delle anomalie fornisce informazioni su cambiamenti imprevisti nei modelli di dati del tenant.  Un'anomalia si verifica quando cambia il modello di comportamento di un oggetto, ad esempio se un oggetto presenta un certo livello di latenza a un certo orario di mercoledì, ma la latenza supera quel livello a quell'orario del mercoledì successivo, tale picco verrà considerato un'anomalia.  Data Infrastructure Insights consente di creare monitor per avvisare quando si verificano anomalie di questo tipo.

Il rilevamento delle anomalie è adatto per metriche di oggetti che presentano uno schema ricorrente e prevedibile.  Quando queste metriche degli oggetti superano o scendono al di sotto dei livelli previsti, Data Infrastructure Insights può generare un avviso per sollecitare un'indagine.

image:anomaly_detection_expert_view.png["grafico che mostra l'anomalia rilevata"]



== Che cos'è il rilevamento delle anomalie?

Si verifica un'anomalia quando il valore medio di una metrica si discosta di un certo numero di deviazioni standard dalla media ponderata di tale metrica per le settimane precedenti, con le settimane recenti che hanno un peso maggiore rispetto alle settimane precedenti.  Data Infrastructure Insights offre la possibilità di monitorare i dati e di inviare avvisi quando vengono rilevate anomalie.  È possibile impostare i livelli di "sensibilità" del rilevamento.  Ad esempio, una sensibilità maggiore si avrebbe quando il valore medio si discosta dalla media con meno deviazioni standard, determinando così la generazione di più avvisi.  Al contrario, minore sensibilità = più deviazioni standard dalla media = meno avvisi.



=== Il monitoraggio del rilevamento delle anomalie è diverso dal monitoraggio delle soglie.

* Il *monitoraggio basato su soglie* funziona quando si hanno soglie predefinite per metriche specifiche.  In altre parole, quando si ha una chiara comprensione di cosa ci si aspetta (ovvero entro un intervallo normale).


image:MetricMonitor_blurb.png["I monitor metrici sono adatti quando si conosce l'intervallo operativo"]

* Il *monitoraggio tramite rilevamento delle anomalie* utilizza algoritmi di apprendimento automatico per identificare i valori anomali che si discostano dalla norma, quando la definizione di "normale" non è chiara.


image:ADMonitor_blurb.png["I monitor di rilevamento delle anomalie sono utili quando si desidera conoscere picchi o cali"]



== Quando avrei bisogno del rilevamento delle anomalie?

Il monitoraggio del rilevamento delle anomalie può fornire avvisi utili in molte situazioni, tra cui:

* Quando la definizione di _normale_ non è chiara.  Ad esempio, è possibile che i tassi di errore SAN varino a seconda della porta.  Segnalare un errore è rumoroso e superfluo, ma un aumento improvviso o significativo potrebbe indicare un problema diffuso.
* Dove si verificano cambiamenti nel tempo.  Carichi di lavoro che presentano stagionalità (ad esempio, sono intensi o silenziosi in determinati periodi).  Ciò potrebbe includere periodi di silenzio inaspettati che potrebbero indicare un blocco del lotto.
* Lavorare con grandi quantità di dati in cui definire e regolare manualmente le soglie risulta poco pratico.  Ad esempio, un tenant con un numero elevato di host e/o volumi con carichi di lavoro variabili.  Ognuno di essi può avere SLA diversi, quindi è importante capire quali sono quelli che superano la norma.




== Creazione di un monitor di rilevamento delle anomalie

Per ricevere avvisi sulle anomalie, creare un monitor andando su *Osservabilità > Avvisi > +Monitor*.  Selezionare _Anomaly Detection Monitor_ come tipo di monitor.

image:AnomalyDetectionMonitorChoice.png["Selezione del rilevamento delle anomalie durante la creazione di un monitor, larghezza=480"]

Scegli l'oggetto e la metrica che vuoi monitorare.  È possibile impostare filtri e raggruppamenti come con altri tipi di monitor.

Successivamente, impostare le condizioni per il monitor.

* Attiva un avviso quando la metrica selezionata _Raggiunge un picco_ oltre i limiti previsti, _Scende al di sotto_ di tali limiti o entrambe le cose.
* Impostare la sensibilità su _Media_, _Bassa_ (vengono rilevate meno anomalie) o _Alta_ (vengono rilevate più anomalie).
* Determina se il livello di allerta è _Critico_ o _Avviso_.
* Facoltativamente, imposta un valore al di sotto del quale le anomalie vengono _ignorate_.  Ciò può contribuire a ridurre il rumore.  Questo valore è mostrato come una linea tratteggiata nel grafico di esempio.


image:AnomalyDetectionMonitorConditions.png["Impostazione delle condizioni per il monitor di rilevamento delle anomalie"]

Infine, è possibile configurare un metodo di recapito per gli avvisi (e-mail, webhook o entrambi), fornire al monitor una descrizione facoltativa o azioni correttive e aggiungere il monitor a un gruppo personalizzato, se lo si desidera.

Salva il monitor con un nome significativo e il gioco è fatto.

Dopo la creazione, il monitor analizza i dati della settimana precedente per stabilire una base di riferimento iniziale.  Il rilevamento delle anomalie diventa più accurato con il passare del tempo e con l'aumentare della cronologia.


NOTE: Quando viene creato un monitor, DII esamina tutti i dati esistenti della settimana precedente per individuare picchi o cali significativi; questi sono considerati anomalie.  Durante la prima settimana successiva alla creazione del monitor (fase di "apprendimento"), è possibile che si verifichi un aumento del "rumore" negli avvisi.  Per attenuare questo rumore, solo i picchi o i cali che durano più di 30 minuti vengono considerati anomalie e generano avvisi.  Nella settimana successiva, man mano che vengono analizzati più dati, il rumore solitamente si riduce e un picco o un calo significativo che duri un certo periodo di tempo viene considerato un'anomalia.



== Visualizzazione delle anomalie

Nella landing page di un avviso, gli avvisi attivati quando vengono rilevate anomalie mostreranno una banda evidenziata nel grafico, dal momento in cui la metrica ha raggiunto un picco al di fuori dei limiti previsti fino a quando è tornata all'interno di tali limiti.

image:Anomaly_Detection_Chart_Example_Expert_View.png["Grafico che mostra l'ora in cui si è verificata un'anomalia"]

Durante la visualizzazione di un grafico delle anomalie nella landing page di un avviso, è possibile scegliere le seguenti opzioni:

* Andamento settimanale: confronta i valori con la stessa ora, lo stesso giorno delle settimane precedenti, per un massimo di 5 settimane.
* Limiti di anomalia completi: per impostazione predefinita, il grafico si concentra sul valore della metrica, in modo da poterne analizzare meglio il comportamento.  Selezionare per visualizzare i limiti completi delle anomalie (valore massimo, ecc.)


È anche possibile visualizzare gli oggetti che hanno contribuito all'anomalia selezionandoli nella sezione prestazioni della landing page.  Il grafico mostrerà il comportamento degli oggetti selezionati.

image:Anomaly_Detection_Contributing_Objects.png["mappatura degli oggetti che contribuiscono all'anomalia"]
