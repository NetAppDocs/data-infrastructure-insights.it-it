---
sidebar: sidebar 
permalink: task_webhook_example_pagerduty.html 
keywords: webhook, notification, PagerDuty, integration 
summary: Crea un webhook per ricevere avvisi sulle soglie di prestazioni o inventario per Pagerduty 
---
= Esempio di webhook per PagerDuty
:hardbreaks:
:allow-uri-read: 


[role="lead"]
I webhook consentono agli utenti di inviare notifiche di avviso a varie applicazioni utilizzando un canale webhook personalizzato.  Questa pagina fornisce un esempio per impostare webhook per PagerDuty.


NOTE: Questa pagina fa riferimento a istruzioni di terze parti, che potrebbero essere soggette a modifiche.  Fare riferimento allink:https://support.pagerduty.com/docs/services-and-integrations["Documentazione PagerDuty"] per le informazioni più aggiornate.



== Configurazione PagerDuty:

. In PagerDuty, vai su *Servizi > Directory dei servizi* e clicca sul pulsante *+Nuovo servizio*
. Inserisci un _Nome_ e seleziona _Usa direttamente la nostra API_.  Fare clic su _Aggiungi servizio_.
+
image:Webhooks_PagerDutyScreen1.png["Schermo di servizio di chiamata"]

. Fare clic sulla scheda _Integrazioni_ per visualizzare la *Chiave di integrazione*.  Questa chiave ti servirà quando creerai il webhook Data Infrastructure Insights riportato di seguito.


. Vai a *Incidenti* o *Servizi* per visualizzare gli avvisi.
+
image:Webhooks_PagerDutyScreen2.png["Schermo di servizio di chiamata"]





== Crea un webhook Data Infrastructure Insights :

. In Data Infrastructure Insights, vai su *Amministrazione > Notifiche* e seleziona la scheda *Webhook*.  Fare clic su *+Webhook* per creare un nuovo webhook.
. Assegna al webhook un nome significativo, ad esempio "PagerDuty Trigger".  Utilizzerai questo webhook per eventi di livello critico e di avviso.
. Nel menu a discesa _Tipo di modello_, seleziona *PagerDuty*.


. Crea un parametro segreto personalizzato denominato _routingKey_ e imposta il valore sul valore _Integration Key_ di PagerDuty indicato sopra.
+
image:Webhooks_Custom_Secret_Routing_Key.png["Impostazione della chiave di routing"]



Ripetere questi passaggi per creare un webhook "PagerDuty Resolve" per gli eventi risolti.



== Mappatura dei campi di PagerDuty per Data Infrastructure Insights

La tabella e l'immagine seguenti mostrano la mappatura dei campi tra PagerDuty e Data Infrastructure Insights:

[cols="<,<"]
|===
| PagerDuty | Data Infrastructure Insights 


| Tasto di avviso | ID avviso 


| Fonte | Attivato 


| Componente | Nome metrica 


| Gruppo | Tipo di oggetto 


| Classe | Nome del monitor 
|===
image:Webhooks-PagerDuty_Fields.png["Campi PagerDuty in CI"]



== Notifiche tramite Webhook

Per notificare gli eventi tramite webhook, in Data Infrastructure Insights vai su *Avvisi > Monitor* e fai clic su *+Monitor* per creare un nuovolink:task_create_monitor.html["monitorare"] .

* Selezionare una metrica e definire le condizioni del monitor.
* In _Imposta notifiche team, seleziona il metodo di recapito *Webhook*.
* Selezionare il webhook "PagerDuty Trigger" per gli eventi di livello critico e di avviso.
* Selezionare "PagerDuty Resolve" per gli eventi risolti.
+
image:Webhooks_Notifications.png["Notifiche webhook"]




NOTE: Impostare notifiche separate per gli eventi trigger rispetto agli eventi risolti è una buona pratica, poiché PagerDuty gestisce gli eventi trigger in modo diverso rispetto agli eventi risolti.
