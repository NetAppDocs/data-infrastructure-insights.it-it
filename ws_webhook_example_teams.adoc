---
sidebar: sidebar 
permalink: ws_webhook_example_teams.html 
keywords: webhook, notification, Microsoft, Teams, integration 
summary: Crea un webhook di sicurezza del carico di lavoro per Microsoft Teams per avvisare sulla sicurezza 
---
= Esempio di webhook di sicurezza del carico di lavoro per Microsoft Teams
:hardbreaks:
:allow-uri-read: 
:nofooter: 
:icons: font
:linkattrs: 
:imagesdir: ./media/


[role="lead"]
I webhook consentono agli utenti di inviare notifiche di avviso a varie applicazioni utilizzando un canale webhook personalizzato.  Questa pagina fornisce un esempio per la configurazione di webhook per Teams.


NOTE: Questa pagina fa riferimento a istruzioni di terze parti, soggette a modifiche.  Fare riferimento allink:https://docs.microsoft.com/en-us/microsoftteams/platform/webhooks-and-connectors/how-to/add-incoming-webhook["Documentazione dei team"] per le informazioni più aggiornate.



== Configurazione delle squadre:

. In Teams, seleziona il kebab e cerca Webhook in arrivo.
+
image:Webhooks_Teams_Create_Webhook.png["Webhook in arrivo in Teams"]

. Seleziona *Aggiungi a un team > Seleziona un team > Imposta un connettore*.
. Copia l'URL del webhook.  Sarà necessario incollarlo nella configurazione del webhook di Workload Security.




== Crea webhook per i team di sicurezza del carico di lavoro:

. Vai su Amministrazione > Notifiche e seleziona la scheda "Webhook di sicurezza del carico di lavoro".  Selezionare _+ Webhook_ per creare un nuovo webhook.
. Assegnare al webhook un nome significativo.
. Nel menu a discesa _Tipo di modello_, seleziona *Team*.
+
image:ws_webhook_teams_example.png["Esempio di webhook dei team di sicurezza del carico di lavoro"]

. Incolla l'URL sopra nel campo _URL_.




=== Passaggi per creare notifiche Teams con il modello Adaptive Card

. Sostituisci il corpo del messaggio con il seguente template:
+
....
  {
  "type": "message",
  "attachments": [
    {
      "contentType": "application/vnd.microsoft.card.adaptive",
      "content": {
        "$schema": "http://adaptivecards.io/schemas/adaptive-card.json",
        "type": "AdaptiveCard",
        "version": "1.2",
        "body": [
          {
            "type": "TextBlock",
            "text": "%%severity%% Alert: %%synopsis%%",
            "wrap": true,
            "weight": "Bolder",
            "size": "Large"
          },
          {
            "type": "TextBlock",
            "text": "%%detected%%",
            "wrap": true,
            "isSubtle": true,
            "spacing": "Small"
          },
          {
            "type": "FactSet",
            "facts": [
              {
                "title": "User",
                "value": "%%userName%%"
              },
              {
                "title": "Attack/Abnormal Behavior",
                "value": "%%type%%"
              },
              {
                "title": "Action taken",
                "value": "%%actionTaken%%"
              },
              {
                "title": "Files encrypted",
                "value": "%%filesEncrypted%%"
              },
              {
                "title": "Encrypted files suffix",
                "value": "%%encryptedFilesSuffix%%"
              },
              {
                "title": "Files deleted",
                "value": "%%filesDeleted%%"
              },
              {
                "title": "Activity Change Rate",
                "value": "%%changePercentage%%"
              },
              {
                "title": "Severity",
                "value": "%%severity%%"
              },
              {
                "title": "Status",
                "value": "%%status%%"
              },
              {
                "title": "Notes",
                "value": "%%note%%"
              }
            ]
          }
        ],
        "actions": [
          {
            "type": "Action.OpenUrl",
            "title": "View Details",
            "url": "https://%%cloudInsightsHostname%%/%%alertDetailsPageUrl%%"
          }
        ]
      }
    }
  ]
}
....
. Se si utilizzano i flussi di Power Automate, i parametri di query nell'URL sono in formato codificato. È necessario decodificare l'URL prima di inserirlo.
. Fare clic su "Test Webhook" per assicurarsi che non vi siano errori.
. Salva il webhook.




== Notifiche tramite Webhook

Per ricevere notifiche sugli eventi tramite webhook, vai su _Sicurezza del carico di lavoro > Criteri_.  Selezionare _+Criterio di attacco_ o _+Criterio di avviso_.

* Immettere un nome significativo per la policy.
* Selezionare i tipi di attacco richiesti, i dispositivi a cui deve essere associata la policy e le azioni richieste.
* Nel menu a discesa _Notifiche webhook_, seleziona i webhook di Teams desiderati. Salva la polizza.


Nota: i webhook possono anche essere allegati a policy esistenti modificandole.

image:ws_add_attack_policy.png["Aggiungi finestra di dialogo della politica di attacco che mostra il webhook"]
