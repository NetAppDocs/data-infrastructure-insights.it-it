---
sidebar: sidebar 
permalink: task_config_telegraf_apache.html 
keywords: telegraf, installation, install, apache 
summary: Configurazione del data collector Apache 
---
= Apache Data Collector
:toc: macro
:hardbreaks:
:toclevels: 1
:allow-uri-read: 
:toc: 
:toclevels: 1
:nofooter: 
:icons: font
:linkattrs: 
:imagesdir: ./media/
:toc-position: content


[role="lead"]
Questo data collector consente la raccolta di dati dai server Apache sul tenant.

.Prerequisiti
* Il server HTTP Apache deve essere configurato e correttamente in esecuzione
* È necessario disporre delle autorizzazioni di sudo o amministratore per l'host/VM dell'agente
* In genere, il modulo Apache _mod_status_ è configurato per esporre una pagina nella posizione '/server-status?auto' del server Apache. L'opzione _ExtendedStatus_ deve essere attivata per raccogliere tutti i campi disponibili. Per informazioni su come configurare il server, consultare la documentazione del modulo Apache: https://httpd.apache.org/docs/2.4/mod/mod_status.html#enable[]




== Installazione

. Da *osservabilità > Collector*, fare clic su *+Data Collector*. Scegli Apache.
+
Selezionare il sistema operativo o la piattaforma su cui è installato Telegraf Agent.

. Se non è già stato installato un Agent per il ritiro o se si desidera installare un Agent per un sistema operativo o una piattaforma diversi, fare clic su _Mostra istruzioni_ per espandere le link:task_config_telegraf_agent.html["Installazione dell'agente"] istruzioni.
. Selezionare il tasto di accesso dell'agente da utilizzare con questo data collector. È possibile aggiungere un nuovo Agent Access Key facendo clic sul pulsante *+ Agent Access Key*. Best practice: Utilizzare un Agent Access Key diverso solo quando si desidera raggruppare i data raccoglitori, ad esempio per sistema operativo/piattaforma.
. Seguire la procedura di configurazione per configurare il data collector. Le istruzioni variano a seconda del tipo di sistema operativo o piattaforma utilizzata per la raccolta dei dati.


image:ApacheDCConfigLinux.png["Configurazione di Apache"]



== Setup (Configurazione)

Il plug-in di Telegraf per HTTP Server di Apache si basa sul modulo 'mod_status' per essere attivato. Quando questa opzione è attivata, il server HTTP di Apache espone un endpoint HTML che può essere visualizzato sul browser o scartato per l'estrazione dello stato di tutte le configurazioni HTTP Server di Apache.



=== Compatibilità:

La configurazione è stata sviluppata rispetto al server HTTP Apache versione 2.4.38.



=== Abilitazione mod_status:

L'attivazione e l'esposizione dei moduli "mod_status" richiede due passaggi:

* Modulo di abilitazione
* Esposizione delle statistiche dal modulo




=== Modulo di abilitazione:

Il caricamento dei moduli è controllato dal file di configurazione sotto '/usr/local/apache/conf/httpd.conf'. Modificare il file di configurazione e rimuovere il commento dalle seguenti righe:

 LoadModule status_module modules/mod_status.so
 Include conf/extra/httpd-info.conf


=== Esposizione delle statistiche dal modulo:

L'esposizione di 'mod_status' è controllata dal file di configurazione in '/usr/local/apache2/conf/extra/httpd-info.conf'. Assicurarsi di avere quanto segue nel file di configurazione (almeno altre direttive saranno presenti):

[listing]
----
# Allow server status reports generated by mod_status,
# with the URL of http://servername/server-status
<Location /server-status>
    SetHandler server-status
</Location>

#
# ExtendedStatus controls whether Apache will generate "full" status
# information (ExtendedStatus On) or just basic information (ExtendedStatus
# Off) when the "server-status" handler is called. The default is Off.
#
ExtendedStatus On
----
Per istruzioni dettagliate sul modulo 'mod_status', vedere la link:https://httpd.apache.org/docs/2.4/mod/mod_status.html#enable["Documentazione di Apache"]



== Oggetti e contatori

Vengono raccolti i seguenti oggetti e i relativi contatori:

[cols="<.<,<.<,<.<,<.<"]
|===
| Oggetto: | Identificatori: | Attributi: | Punti dati: 


| Apache | Server namespace | Nodo IP Node Name Port Parent Server Config Generation Parent Server MPM Generation Server uptime is stopping | Occupati byte per richiesta byte per secondo CPU bambini CPU sistema bambini CPU utente carico CPU sistema CPU utente connessioni asincrone chiusura connessioni asincrone mantenimento connessioni asincrone scrittura connessioni totale durata per richiesta lavoratori inattivi carico medio (ultimi 1 m) carico medio (ultimi 15 m) carico medio (ultimi 5 m) Elabora le richieste al secondo accessi totali durata totale KByte Scoreboard chiusura Scoreboard Lookups DNS Scoreboard finitura Scoreboard Idle Cleanup Scoreboard Keep Alive Scoreboard Logging Scoreboard Open Scoreboard Reading Scoreboard Sending Scoreboard Starting Scoreboard Waiting 
|===


== Risoluzione dei problemi

Ulteriori informazioni sono disponibili nella link:concept_requesting_support.html["Supporto"] pagina .
