---
sidebar: sidebar 
permalink: task_config_telegraf_apache.html 
keywords: telegraf, installation, install, apache 
summary: Configurazione del raccoglitore dati Apache 
---
= Apache Data Collector
:hardbreaks:
:allow-uri-read: 


[role="lead"]
Questo raccoglitore di dati consente la raccolta di dati dai server Apache sul tuo tenant.

.Prerequisiti
* Devi avere il tuo server Apache HTTP configurato e funzionante correttamente
* Devi avere i permessi sudo o amministratore sul tuo host agente/VM
* In genere, il modulo Apache _mod_status_ è configurato per esporre una pagina nella posizione '/server-status?auto' del server Apache.  Per raccogliere tutti i campi disponibili, è necessario abilitare l'opzione _ExtendedStatus_.  Per informazioni su come configurare il server, consultare la documentazione del modulo Apache: https://httpd.apache.org/docs/2.4/mod/mod_status.html#enable[]




== Installazione

. Da *Osservabilità > Collettori*, fare clic su *+Collettore dati*.  Scegli Apache.
+
Selezionare il sistema operativo o la piattaforma su cui è installato l'agente Telegraf.

. Se non hai ancora installato un agente per la raccolta o desideri installare un agente per un sistema operativo o una piattaforma diversi, fai clic su _Mostra istruzioni_ per espandere lalink:task_config_telegraf_agent.html["Installazione dell'agente"] istruzioni.
. Selezionare la chiave di accesso dell'agente da utilizzare con questo raccoglitore dati.  È possibile aggiungere una nuova chiave di accesso agente facendo clic sul pulsante *+ Chiave di accesso agente*.  Procedura consigliata: utilizzare una chiave di accesso agente diversa solo quando si desidera raggruppare i raccoglitori di dati, ad esempio in base al sistema operativo/piattaforma.
. Seguire i passaggi di configurazione per configurare il raccoglitore dati.  Le istruzioni variano a seconda del tipo di sistema operativo o piattaforma utilizzata per raccogliere i dati.


image:ApacheDCConfigLinux.png["Configurazione di Apache"]



== Impostare

Il plugin di Telegraf per il server HTTP di Apache si basa sull'abilitazione del modulo 'mod_status'.  Se questa opzione è abilitata, il server HTTP di Apache esporrà un endpoint HTML che può essere visualizzato sul browser o recuperato per l'estrazione dello stato di tutta la configurazione del server HTTP di Apache.



=== Compatibilità:

La configurazione è stata sviluppata per la versione 2.4.38 del server HTTP di Apache.



=== Abilitazione di mod_status:

L'abilitazione e l'esposizione dei moduli 'mod_status' comporta due passaggi:

* Modulo di abilitazione
* Esposizione delle statistiche dal modulo




=== Modulo di abilitazione:

Il caricamento dei moduli è controllato dal file di configurazione in '/usr/local/apache/conf/httpd.conf'.  Modifica il file di configurazione e rimuovi il commento dalle seguenti righe:

 LoadModule status_module modules/mod_status.so
 Include conf/extra/httpd-info.conf


=== Visualizzazione delle statistiche dal modulo:

L'esposizione di 'mod_status' è controllata dal file di configurazione in '/usr/local/apache2/conf/extra/httpd-info.conf'.  Assicuratevi di avere quanto segue nel file di configurazione (almeno, ci saranno altre direttive):

[listing]
----
# Allow server status reports generated by mod_status,
# with the URL of http://servername/server-status
<Location /server-status>
    SetHandler server-status
</Location>

#
# ExtendedStatus controls whether Apache will generate "full" status
# information (ExtendedStatus On) or just basic information (ExtendedStatus
# Off) when the "server-status" handler is called. The default is Off.
#
ExtendedStatus On
----
Per istruzioni dettagliate sul modulo 'mod_status', vederelink:https://httpd.apache.org/docs/2.4/mod/mod_status.html#enable["Documentazione di Apache"]



== Oggetti e contatori

Vengono raccolti i seguenti oggetti e i relativi contatori:

[cols="<.<,<.<,<.<,<.<"]
|===
| Oggetto: | Identificatori: | Attributi: | Punti dati: 


| Apache | Server dello spazio dei nomi | IP del nodo Nome del nodo Porta Generazione della configurazione del server padre Generazione MPM del server padre Il tempo di attività del server si sta interrompendo | Lavoratori occupati Byte per richiesta Byte al secondo CPU CPU di sistema figli CPU utente figli Carico CPU di sistema CPU utente Connessioni asincrone Chiusura Connessioni asincrone Keep Alive Connessioni asincrone Scrittura Connessioni Durata totale per richiesta Lavoratori inattivi Carico medio (ultimo minuto) Carico medio (ultimi 15 minuti) Carico medio (ultimi 5 minuti) Processi Richieste al secondo Accessi totali Durata totale Kbyte totali Tabellone segnapunti Chiusura tabellone segnapunti Ricerche DNS Tabellone segnapunti Completamento tabellone segnapunti Pulizia inattiva tabellone segnapunti Keep Alive Registrazione tabellone segnapunti Apertura tabellone segnapunti Lettura tabellone segnapunti Invio tabellone segnapunti Avvio tabellone segnapunti In attesa 
|===


== Risoluzione dei problemi

Ulteriori informazioni possono essere trovate pressolink:concept_requesting_support.html["Supporto"] pagina.
