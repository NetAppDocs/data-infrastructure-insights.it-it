---
sidebar: sidebar 
permalink: task_config_telegraf_docker.html 
keywords: telegraf, installation, install, docker 
summary: Configurazione del raccoglitore dati Docker 
---
= Docker Data Collector
:hardbreaks:
:allow-uri-read: 


[role="lead"]
Data Infrastructure Insights utilizza questo raccoglitore di dati per raccogliere metriche da Docker.



== Installazione

. Da *Osservabilità > Collettori*, fare clic su *+Collettore dati*.  Scegli Docker.
+
Se non hai configurato un agente per la raccolta, ti verrà richiesto dilink:task_config_telegraf_agent.html["installare un agente"] sul tuo inquilino.

+
Se hai già configurato un agente, seleziona il sistema operativo o la piattaforma appropriati e fai clic su *Continua*.

. Seguire le istruzioni nella schermata Configurazione Docker per configurare il raccoglitore dati.  Le istruzioni variano a seconda del tipo di sistema operativo o piattaforma utilizzata per raccogliere i dati.


image:DockerDCConfigLinux.png["Configurazione Docker"]



== Impostare

Il plugin di input Telegraf per Docker raccoglie le metriche tramite un socket UNIX specificato o un endpoint TCP.



=== Compatibilità

La configurazione è stata sviluppata per Docker versione 1.12.6.



=== Impostazione



=== Accesso a Docker tramite un socket UNIX

Se l'agente Telegraf è in esecuzione su baremetal, aggiungere l'utente Unix Telegraf al gruppo Unix Docker eseguendo quanto segue:

 sudo usermod -aG docker telegraf
Se l'agente Telegraf è in esecuzione all'interno di un pod Kubernetes, esporre il socket Docker Unix mappando il socket nel pod come volume e quindi montando tale volume su /var/run/docker.sock.  Ad esempio, aggiungi quanto segue al PodSpec:

[listing]
----
volumes:
...
- name: docker-sock
hostPath:
path: /var/run/docker.sock
type: File
----
Quindi, aggiungi quanto segue al contenitore:

[listing]
----
volumeMounts:
...
- name: docker-sock
mountPath: /var/run/docker.sock
----
Si noti che il programma di installazione Data Infrastructure Insights fornito per la piattaforma Kubernetes si occupa automaticamente di questa mappatura.



=== Accedi a Docker tramite un endpoint TCP

Per impostazione predefinita, Docker utilizza la porta 2375 per l'accesso non crittografato e la porta 2376 per l'accesso crittografato.



== Oggetti e contatori

Vengono raccolti i seguenti oggetti e i relativi contatori:

[cols="<.<,<.<,<.<,<.<"]
|===
| Oggetto: | Identificatori: | Attributi: | Punti dati: 


| Motore Docker | Motore Docker dello spazio dei nomi | Nome nodo IP nodo UUID nodo Sistema operativo nodo Cluster Kubernetes Versione Docker Unità | Contenitori di memoria Contenitori Contenitori in pausa Contenitori in esecuzione CPU arrestate Routine di avvio Immagini Eventi di ascolto Descrittori di file utilizzati Dati Dati disponibili Dati totali utilizzati Metadati Metadati disponibili Metadati totali utilizzati Dimensione blocco pool 


| Contenitore Docker | Nome del contenitore dello spazio dei nomi Docker Engine | Hash del contenitore Kubernetes Porte del contenitore Kubernetes Conteggio riavvii del contenitore Kubernetes Percorso del messaggio di terminazione del contenitore Kubernetes Criterio del messaggio di terminazione del contenitore Kubernetes Periodo di grazia per la terminazione del pod Kubernetes Immagine del contenitore Stato del contenitore Versione del contenitore Nome del nodo Percorso del registro del contenitore Kubernetes Nome del contenitore Kubernetes Tipo di Docker Kubernetes Nome del pod Kubernetes Spazio dei nomi del pod Kubernetes UID del pod Kubernetes ID sandbox Kubernetes IP del nodo UUID del nodo Versione Docker Configurazione IO Kubernetes visualizzata Sorgente della configurazione IO Kubernetes SCC IO OpenShift Descrizione Kubernetes Nome visualizzato Kubernetes Tag OpenShift Kompose Service Pod Template Hash Controller Revisione Hash Generazione del modello del pod Licenza Schema Data di build Schema Licenza Nome schema URL schema URL VCS schema Fornitore schema Versione schema Schema Versione schema Manutentore Pod cliente Kubernetes StatefulSet Nome pod Tenant Webconsole Architettura URL origine autorevole Data di build Host build RH Componente RH Ambito di distribuzione Installazione Rilascio Esecuzione Riepilogo Disinstallazione VCS Ref Tipo VCS Fornitore Versione Stato di integrità ID contenitore | Memoria attiva Memoria anonima Memoria attiva Memoria file cache Limite gerarchico della memoria Memoria inattiva Memoria anonima Memoria inattiva Limite di memoria file Memoria file mappata Utilizzo massimo della memoria Errore di pagina della memoria Errore di pagina maggiore della memoria Memoria paginata in memoria paginata in memoria paginata in memoria Dimensione del set residente della memoria Dimensione del set residente della memoria Enorme Memoria totale attiva Memoria anonima Memoria file attiva Memoria cache totale Memoria anonima Memoria file inattiva Memoria file mappata Memoria totale Errore di pagina maggiore della memoria Totale Memoria paginata in memoria totale Paginata in memoria totale Paginata in memoria totale Dimensione del set residente della memoria Totale Dimensione del set residente della memoria Enorme Memoria totale non rimuovibile Utilizzo della memoria non rimuovibile Percentuale di utilizzo della memoria Codice di uscita OOM PID eliminato Avviato con sequenza di errori 


| Docker Container Block IO | Namespace Contenitore Nome Dispositivo Motore Docker | Hash del contenitore Kubernetes Porte del contenitore Kubernetes Conteggio riavvii del contenitore Kubernetes Percorso del messaggio di terminazione del contenitore Kubernetes Criterio del messaggio di terminazione del contenitore Kubernetes Periodo di grazia per la terminazione del pod Kubernetes Immagine del contenitore Stato del contenitore Versione del contenitore Nome del nodo Percorso del registro del contenitore Kubernetes Nome del contenitore Kubernetes Tipo di Docker Kubernetes Nome del pod Kubernetes Spazio dei nomi del pod Kubernetes UID del pod Kubernetes ID sandbox Kubernetes IP del nodo UUID del nodo Versione Docker Configurazione Kubernetes visualizzata Sorgente della configurazione Kubernetes OpenShift SCC Descrizione di Kubernetes Nome visualizzato di Kubernetes Tag di OpenShift Schema Versione dello schema Hash del modello del pod Hash di revisione del controller Generazione del modello del pod Servizio Kompose Data di build dello schema Licenza dello schema Nome dello schema Fornitore dello schema Pod del cliente Nome del pod StatefulSet di Kubernetes Tenant Webconsole Data di build Fornitore della licenza Architettura URL sorgente autorevole Host di build RH Componente RH Ambito di distribuzione Installa Manutentore Rilascio Riepilogo esecuzione Disinstalla Riferimento VCS Tipo VCS Versione URL schema URL VCS schema Versione schema Contenitore ID | Byte del servizio IO ricorsivi asincroni Byte del servizio IO ricorsivi in lettura Byte del servizio IO ricorsivi in sincronizzazione Byte del servizio IO ricorsivi totali Byte del servizio IO ricorsivi in scrittura Byte del servizio IO ricorsivi in asincroni serviti in lettura ricorsiva Byte del servizio IO ricorsivi in sincronizzazione serviti in lettura ricorsiva Byte del servizio IO ricorsivi totali serviti in scrittura ricorsiva 


| Rete di contenitori Docker | Namespace Container Nome Rete Docker Engine | Immagine del contenitore Stato del contenitore Versione del contenitore Nome del nodo IP del nodo UUID del nodo Sistema operativo del nodo Cluster K8s Versione Docker ID del contenitore | RX eliminati Byte RX Errori RX Pacchetti RX TX eliminati Byte TX Errori TX Pacchetti TX 


| CPU del contenitore Docker | Nome del contenitore dello spazio dei nomi CPU Motore Docker | Hash del contenitore Kubernetes Porte del contenitore Kubernetes Conteggio riavvii del contenitore Kubernetes Percorso del messaggio di terminazione del contenitore Kubernetes Criterio del messaggio di terminazione del contenitore Kubernetes Periodo di grazia per la terminazione del pod Kubernetes Configurazione Kubernetes visualizzata Origine della configurazione Kubernetes Immagine del contenitore OpenShift SCC Stato del contenitore Versione del contenitore Nome del nodo Percorso del registro del contenitore Kubernetes Nome del contenitore Kubernetes Tipo di Docker Kubernetes Nome del pod Kubernetes Spazio dei nomi del pod Kubernetes UID del pod Kubernetes ID sandbox Kubernetes IP del nodo UUID del nodo Sistema operativo del nodo Versione Docker del cluster Kubernetes Descrizione di Kubernetes Nome visualizzato di Kubernetes Tag OpenShift Versione dello schema Hash del modello del pod Hash di revisione del controller Generazione del modello del pod Servizio Kompose Data di build dello schema Licenza dello schema Nome dello schema Fornitore dello schema Pod del cliente Nome del pod StatefulSet Kubernetes Tenant Webconsole Data di build Fornitore della licenza Architettura URL sorgente autorevole Host di build RH Componente RH Ambito di distribuzione Installa Manutentore Rilascio Riepilogo esecuzione Disinstalla Riferimento VCS Tipo VCS Versione URL schema URL Schema VCS Versione Schema ID Contenitore | Periodi di limitazione Periodi di limitazione della limitazione Tempo di limitazione della limitazione Utilizzo in modalità kernel Utilizzo in modalità utente Percentuale di utilizzo Utilizzo del sistema Utilizzo totale 
|===


== Risoluzione dei problemi

[cols="2*"]
|===
| Problema: | Prova questo: 


| Dopo aver seguito le istruzioni nella pagina di configurazione, non vedo le mie metriche Docker in Data Infrastructure Insights . | Controllare i registri dell'agente Telegraf per vedere se segnala il seguente errore: E!  Errore nel plugin [inputs.docker]: Autorizzazione negata durante il tentativo di connessione al socket del demone Docker. In tal caso, adottare le misure necessarie per consentire all'agente Telegraf di accedere al socket Unix Docker come specificato sopra. 
|===
Ulteriori informazioni possono essere trovate pressolink:concept_requesting_support.html["Supporto"] pagina.
