---
sidebar: sidebar 
permalink: task_create_query.html 
summary: Le query consentono di identificare in modo rapido e semplice le risorse e le metriche di interesse. 
keywords: query, queries 
---
= Creazione di query
:hardbreaks:
:allow-uri-read: 


[role="lead"]
Le query consentono di cercare le risorse del tenant a livello granulare, consentendo di filtrare i dati desiderati e ordinare i risultati a proprio piacimento.

Ad esempio, è possibile creare una query per _volumi_, aggiungere un filtro per trovare specifici _archiviazioni_ associati ai volumi selezionati, aggiungere un altro filtro per trovare una specifica _annotazione_ come "Livello 1" sulle archiviazioni selezionate e infine aggiungere un altro filtro per trovare tutte le archiviazioni con _IOPS - Lettura (IO/s)_ maggiore di 25.  Una volta visualizzati i risultati, è possibile ordinare le colonne di informazioni associate alla query in ordine crescente o decrescente.

Nota: quando viene aggiunto un nuovo raccoglitore di dati che acquisisce risorse o vengono effettuate assegnazioni di annotazioni o applicazioni, è possibile eseguire query su tali nuove risorse, annotazioni o applicazioni solo dopo che le query sono state indicizzate.  L'indicizzazione avviene a intervalli regolari programmati o durante determinati eventi, ad esempio l'esecuzione di regole di annotazione.

.Creare una query è molto semplice:
. Vai a *Query > *+Nuova query*.
. Dall'elenco "Seleziona...", seleziona il tipo di oggetto per il quale desideri effettuare la query.  Puoi scorrere l'elenco oppure iniziare a digitare per trovare più rapidamente ciò che stai cercando.


.Elenco di scorrimento:
image:QueryDrop-DownList.png["Query a discesa"]

.Digita per cercare:
image:QueryPageFilter.png["Digitare per trovare"]

Puoi aggiungere filtri per restringere ulteriormente la tua query cliccando sul pulsante *+* nel campo *Filtra per*.  Raggruppa le righe per oggetto o attributo.  Quando si lavora con dati di integrazione (Kubernetes, ONTAP Advanced Metrics, ecc.), è possibile raggruppare in base a più attributi, se lo si desidera.

image:QueryFilterExample.png["Filtraggio e raggruppamento delle query"]

L'elenco dei risultati della query mostra un numero di colonne predefinite, a seconda del tipo di oggetto cercato.  Per aggiungere, rimuovere o modificare le colonne, fare clic sull'icona dell'ingranaggio a destra della tabella.  Le colonne disponibili variano in base al tipo di risorsa/metrica.

image:QuerySelectColumns.png["Seleziona colonne"]



== Guardalo in azione

link:https://media.netapp.com/video-detail/d0530e0b-a222-52e7-92b1-dbeeee41b712/explore-and-analyze-with-queries-in-data-infrastructure-insights["Esplora e analizza con le query in Data Infrastructure Insights (video)"]



== Scelta di aggregazione, unità, formattazione condizionale



=== Aggregazione e unità

Per le colonne "valore", è possibile perfezionare ulteriormente i risultati della query scegliendo il modo in cui vengono aggregati i valori visualizzati e selezionando le unità in cui tali valori vengono visualizzati.  Per accedere a queste opzioni, selezionare il menu "tre punti" nell'angolo superiore di una colonna.

image:Query_Page_Aggregation_etc.png["Risultati della pagina di query che mostrano aggregazione, formattazione condizionale, visualizzazione unità e ridenominazione colonne"]



==== Unità

È possibile selezionare le unità in cui visualizzare i valori.  Ad esempio, se la colonna selezionata mostra la capacità grezza e i valori sono mostrati in GiB, ma si preferisce visualizzarli in TiB, è sufficiente selezionare TiB dal menu a discesa Visualizzazione unità.



==== Aggregazione

Allo stesso modo, se i valori mostrati sono aggregati dai dati sottostanti come "Media", ma si preferisce mostrare la somma di tutti i valori, selezionare "Somma" dal menu a discesa _Raggruppa per_ (se si desidera che i valori raggruppati mostrino le somme) o dal menu a discesa _Aggregazione temporale per_ (se si desidera che i valori di riga mostrino le somme dei dati sottostanti).

È possibile scegliere di aggregare i punti dati raggruppati in base a _Media, Max, Min o Somma_.

È possibile aggregare i dati delle singole righe in base a _Media, Ultimo punto dati acquisito, Massimo, Minimo o Somma_.



==== Formattazione condizionale

La formattazione condizionale consente di evidenziare le soglie di livello di avviso e di livello critico nell'elenco dei risultati della query, offrendo visibilità immediata ai valori anomali e ai punti dati eccezionali.

image:Query_Page_Conditional_Formatting.png["Formattazione condizionale nella pagina delle query"]

La formattazione condizionale viene impostata separatamente per ogni colonna.  Ad esempio, è possibile scegliere un set di soglie per una colonna di capacità e un altro set per una colonna di produttività.



==== Rinomina colonna

Rinominando una colonna si modifica il nome visualizzato nell'elenco dei risultati della query.  Il nome della nuova colonna viene visualizzato anche nel file risultante se si esporta l'elenco delle query in formato .CSV.



=== Salva

Dopo aver configurato la query in modo da visualizzare i risultati desiderati, puoi fare clic sul pulsante *Salva* per salvare la query per un utilizzo futuro.  Dategli un nome significativo e unico.



== Ulteriori informazioni sul filtraggio



=== Caratteri jolly ed espressioni

Quando si filtrano valori di testo o di elenco in query o widget della dashboard, quando si inizia a digitare viene presentata l'opzione per creare un *filtro con caratteri jolly* in base al testo corrente.  Selezionando questa opzione verranno restituiti tutti i risultati che corrispondono all'espressione jolly.  È anche possibile creare *espressioni* utilizzando NOT o OR, oppure selezionare l'opzione "Nessuno" per filtrare i valori nulli nel campo.

image:Type-Ahead-Example-ingest.png["Filtro jolly"]

I filtri basati su caratteri jolly o espressioni (ad esempio NOT, OR, "Nessuno", ecc.) vengono visualizzati in blu scuro nel campo filtro.  Gli elementi selezionati direttamente dall'elenco vengono visualizzati in azzurro.

image:Type-Ahead-Example-Wildcard-DirectSelect.png["Risultati del filtro con caratteri jolly"]

Si noti che il filtro con caratteri jolly ed espressioni funziona con testo o elenchi, ma non con valori numerici, date o valori booleani.



=== Filtri di affinamento

Per affinare il filtro puoi usare quanto segue:

|===


| Filtro | Cosa fa | Esempio | Risultato 


| * (Asterisco) | ti permette di cercare tutto | vol*rhel | restituisce tutte le risorse che iniziano con "vol" e finiscono con "rhel" 


| ?  (punto interrogativo) | consente di cercare un numero specifico di caratteri | BOS-PRD??-S12 | restituisce BOS-PRD**__12__**-S12, BOS-PRD**__23__**-S12 e così via 


| O | consente di specificare più entità | FAS2240 O CX600 O FAS3270 | restituisce uno qualsiasi tra FAS2440, CX600 o FAS3270 


| NON | consente di escludere il testo dai risultati della ricerca | NON EMC* | restituisce tutto ciò che non inizia con "EMC" 


| _Nessuno_ | cerca valori NULL in tutti i campi | _Nessuno_ | restituisce risultati in cui il campo di destinazione è vuoto 


| Non * | cerca valori NULL nei campi _solo testo_ | Non * | restituisce risultati in cui il campo di destinazione è vuoto 
|===
Se si racchiude una stringa di filtro tra virgolette doppie, Insight considera tutto ciò che si trova tra la prima e l'ultima virgoletta come una corrispondenza esatta.  Tutti i caratteri speciali o gli operatori all'interno delle virgolette verranno trattati come valori letterali.  Ad esempio, filtrando per "*" si otterranno risultati che sono un asterisco letterale; in questo caso l'asterisco non verrà trattato come un carattere jolly.  Anche gli operatori OR e NOT verranno trattati come stringhe letterali se racchiusi tra virgolette doppie.



=== Filtraggio per valori booleani

Quando si filtra un valore booleano, potrebbero essere presentate le seguenti opzioni di filtraggio:

* *Qualsiasi*: restituirà _tutti_ i risultati, compresi i risultati impostati su "Sì", "No" o non impostati affatto.
* *Sì*: Restituisce solo risultati "Sì". Si noti che DII mostra "Sì" come segno di spunta nella maggior parte delle tabelle. I valori possono essere impostati su "True", "On", ecc.; DII li tratta tutti come "Sì".
* *No*: restituisce solo risultati "No". Si noti che DII mostra "No" come una "X" nella maggior parte delle tabelle. I valori possono essere impostati su "Falso", "Off", ecc.; DII li tratta tutti come "No".
* *Nessuno*: restituisce solo i risultati in cui il valore non è stato impostato. Chiamati anche valori "Null".




== Cosa devo fare ora che ho i risultati della query?

Le query rappresentano un modo semplice per aggiungere annotazioni o assegnare applicazioni alle risorse.  Tieni presente che puoi assegnare applicazioni o annotazioni solo alle risorse del tuo inventario (disco, archiviazione, ecc.).  Le metriche di integrazione non possono accettare assegnazioni di annotazioni o applicazioni.

Per assegnare un'annotazione o un'applicazione alle risorse risultanti dalla query, seleziona semplicemente la/le risorsa/e utilizzando la colonna delle caselle di controllo a sinistra della tabella dei risultati, quindi fai clic sul pulsante *Azioni in blocco* a destra.  Scegli l'azione desiderata da applicare alle risorse selezionate.

image:QueryVolumeBulkActions.png["Esempio di azioni di query in blocco"]



== Le regole di annotazione richiedono una query

Se stai configurandolink:task_create_annotation_rules.html["Regole di annotazione"] , ogni regola deve avere una query sottostante con cui lavorare.  Ma come hai visto sopra, le query possono essere ampie o ristrette, a seconda delle tue esigenze.
