---
sidebar: sidebar 
permalink: task_create_monitor.html 
keywords: monitors, alerts, log, metric, system-defined, system, metric, 
summary: 'Crea monitor di metriche e registri personalizzati per monitorare in modo proattivo le prestazioni dell"infrastruttura, le soglie di capacità e gli eventi critici con avvisi e notifiche automatizzati.' 
---
= Avvisi con monitor
:hardbreaks:
:allow-uri-read: 
:nofooter: 
:icons: font
:linkattrs: 
:imagesdir: ./media/


[role="lead"]
Configura i monitor per monitorare le soglie di prestazione, registrare eventi e anomalie nelle risorse della tua infrastruttura. Crea avvisi personalizzati per parametri quali latenza di scrittura del nodo, capacità di archiviazione o prestazioni dell'applicazione e ricevi notifiche quando queste condizioni vengono soddisfatte.

I monitor consentono di impostare soglie sulle metriche generate da oggetti "infrastrutturali" quali storage, VM, EC2 e porte, nonché per dati di "integrazione" come quelli raccolti per Kubernetes, metriche avanzate ONTAP e plugin Telegraf.  Questi monitor _metrici_ ti avvisano quando vengono superate le soglie di livello di attenzione o di livello critico.

È anche possibile creare monitor per attivare avvisi di livello di avvertenza, critici o informativi quando vengono rilevati specifici _eventi di registro_.

Data Infrastructure Insights fornisce una serie dilink:task_system_monitors.html["Monitor definiti dal sistema"] anche in base all'ambiente.



== Migliori pratiche di sicurezza

Gli avvisi di Data Infrastructure Insights sono progettati per evidenziare punti dati e tendenze sul tenant e Data Infrastructure Insights consente di immettere qualsiasi indirizzo e-mail valido come destinatario dell'avviso.  Se lavori in un ambiente sicuro, fai particolare attenzione a chi riceve la notifica o ha accesso all'avviso.



== Monitoraggio metrico o log?

. Dal menu Data Infrastructure Insights , fare clic su *Avvisi > Gestisci monitoraggi*
+
Viene visualizzata la pagina Elenco monitor, che mostra i monitor attualmente configurati.

. Per modificare un monitor esistente, fare clic sul nome del monitor nell'elenco.
. Per aggiungere un monitor, fare clic su *+ Monitor*.
+
image:Monitor_log_or_metric.png["Scegli il sistema o il monitor dei registri"]

+
Quando si aggiunge un nuovo monitor, viene richiesto di creare un monitor delle metriche o un monitor dei registri.

+
** _Metric_ monitora gli avvisi sui trigger correlati all'infrastruttura o alle prestazioni
** _Log_ monitora gli avvisi sulle attività correlate al registro


+
Dopo aver scelto il tipo di monitor, viene visualizzata la finestra di dialogo Configurazione monitor.  La configurazione varia a seconda del tipo di monitor che si desidera creare.





=== Monitor metrico

. Nel menu a discesa, cerca e scegli un tipo di oggetto e una metrica da monitorare.


È possibile impostare filtri per restringere il campo degli attributi o delle metriche degli oggetti da monitorare.

image:MonitorMetricFilter.png["Filtraggio delle metriche"]

Quando si lavora con dati di integrazione (Kubernetes, ONTAP Advanced Data, ecc.), il filtraggio delle metriche rimuove i punti dati individuali/non corrispondenti dalla serie di dati tracciati, a differenza dei dati dell'infrastruttura (archiviazione, VM, porte, ecc.) in cui i filtri agiscono sul valore aggregato della serie di dati e potenzialmente rimuovono l'intero oggetto dal grafico.

I monitor delle metriche si applicano agli oggetti di inventario quali storage, switch, host, VM, ecc., nonché alle metriche di integrazione quali dati ONTAP Advanced o Kubernetes. Quando si monitorano gli oggetti dell'inventario, tenere presente che non è possibile selezionare il metodo "Raggruppa per". Tuttavia, il raggruppamento è consentito durante il monitoraggio dei dati di integrazione.



==== Monitor multi-condizione

Puoi scegliere di perfezionare ulteriormente il monitoraggio delle metriche aggiungendo una seconda condizione. Basta espandere il prompt "+Aggiungi condizione metrica secondaria" e configurare la condizione aggiuntiva.

image:multi-condition_monitor_second_condition.png["imposta la seconda condizione"]

Il monitor emetterà un avviso se entrambe le condizioni sono soddisfatte.

Tieni presente che puoi usare solo l'opzione "AND" per una seconda condizione; non puoi scegliere di ricevere un avviso per una condizione OPPURE per l'altra.



==== Definire le condizioni del monitor.

. Dopo aver scelto l'oggetto e la metrica da monitorare, impostare le soglie di livello di avviso e/o di livello critico.
. Per il livello _Avviso_, immettere 200 per il nostro esempio.  La linea tratteggiata che indica questo livello di avviso viene visualizzata nel grafico di esempio.
. Per il livello _Critico_, immettere 400.  La linea tratteggiata che indica questo livello critico viene visualizzata nel grafico di esempio.
+
Il grafico mostra i dati storici.  Le linee di livello di avviso e critico sul grafico sono una rappresentazione visiva del Monitor, in modo da poter vedere facilmente quando il Monitor potrebbe attivare un avviso in ciascun caso.

. Per l'intervallo di occorrenza, selezionare _Continuamente_ per un periodo di _15 minuti_.
+
È possibile scegliere di attivare un avviso nel momento in cui viene superata una soglia oppure attendere che la soglia venga superata in modo continuativo per un determinato periodo di tempo.  Nel nostro esempio, non vogliamo essere avvisati ogni volta che il valore IOPS totale supera il livello di avviso o critico, ma solo quando un oggetto monitorato supera continuamente uno di questi livelli per almeno 15 minuti.

+
image:Monitor_metric_conditions.png["Definire le condizioni del monitor"]





==== Definire il comportamento di risoluzione degli avvisi

È possibile scegliere come risolvere un avviso di monitoraggio delle metriche.  Ti vengono presentate due scelte:

* Risolvere quando la metrica torna nell'intervallo accettabile.
* Risolve quando la metrica rientra nell'intervallo accettabile per un periodo di tempo specificato, da 1 minuto a 7 giorni.




=== Monitoraggio dei registri

Quando si crea un *monitor dei log*, scegliere innanzitutto quale log monitorare dall'elenco dei log disponibili.  È quindi possibile filtrare in base agli attributi disponibili come sopra.  È anche possibile scegliere uno o più attributi "Raggruppa per".


NOTE: Il filtro Log Monitor non può essere vuoto.

image:Monitor_Group_By_Example.png["Scegli il registro da monitorare, imposta un filtro e seleziona il metodo di raggruppamento, se lo desideri"]



==== Definisci il comportamento dell'avviso

È possibile creare il monitor in modo che emetta un avviso con un livello di gravità _Critico_, _Avviso_ o _Informativo_ quando le condizioni definite sopra si verificano una volta (ovvero immediatamente) oppure attendere che l'avviso venga emesso finché le condizioni non si verificano 2 o più volte.



==== Definire il comportamento di risoluzione degli avvisi

È possibile scegliere come risolvere un avviso del monitoraggio dei log.  Ti vengono presentate tre scelte:

* *Risolvi istantaneamente*: l'avviso viene risolto immediatamente senza bisogno di ulteriori azioni
* *Risolvi in base al tempo*: l'avviso viene risolto dopo che è trascorso il tempo specificato
* *Risolvi in base alla voce di registro*: l'avviso viene risolto quando si verifica un'attività di registro successiva.  Ad esempio, quando un oggetto viene registrato come "disponibile".


image:Monitor_log_monitor_resolution.png["Risoluzione degli avvisi"]



=== Monitoraggio del rilevamento delle anomalie

. Nel menu a discesa, cerca e scegli un tipo di oggetto e una metrica da monitorare.


È possibile impostare filtri per restringere il campo degli attributi o delle metriche degli oggetti da monitorare.

image:AnomalyDetectionMonitorMetricChoosing.png["Filtraggio delle metriche per il rilevamento delle anomalie"]



==== Definire le condizioni del monitor.

. Dopo aver scelto l'oggetto e la metrica da monitorare, è necessario impostare le condizioni in cui viene rilevata un'anomalia.
+
** Scegli se rilevare un'anomalia quando la metrica scelta *supera di un picco* i limiti previsti, *scende di un picco* rispetto a tali limiti oppure *supera di un picco o scende di un picco* rispetto ai limiti.
** Imposta la *sensibilità* del rilevamento.  *Basso* (vengono rilevate meno anomalie), *Medio* o *Alto* (vengono rilevate più anomalie).
** Imposta gli avvisi come *Avviso* o *Critico*.
** Se lo si desidera, è possibile scegliere di ridurre il rumore, ignorando le anomalie quando la metrica scelta è al di sotto di una soglia impostata.




image:AnomalyDetectionMonitorDefineConditions.png["Definizione delle condizioni per attivare un rilevamento di anomalie"]



=== Seleziona il tipo di notifica e i destinatari

Nella sezione _Imposta notifiche al team_ puoi scegliere se avvisare il tuo team tramite e-mail o Webhook.

image:Webhook_Choose_Monitor_Notification.png["Scegli il metodo di avviso"]

*Avviso via e-mail:*

Specificare i destinatari e-mail per le notifiche di avviso.  Se lo desideri, puoi scegliere destinatari diversi per gli avvisi di avviso o gli avvisi critici.

image:email_monitor_alerts.png["Destinatari degli avvisi e-mail"]

*Avviso tramite Webhook:*

Specificare i webhook per le notifiche di avviso.  Se lo desideri, puoi scegliere webhook diversi per avvisi di avviso o critici.

image:Webhook_Monitor_Notifications.png["Avvisi webhook"]


NOTE: Le notifiche di ONTAP Data Collector hanno la precedenza su qualsiasi notifica specifica di Monitor pertinente al cluster/data collector.  L'elenco dei destinatari impostato per il Data Collector riceverà gli avvisi del Data Collector.  Se non sono presenti avvisi attivi del raccoglitore dati, gli avvisi generati dal monitor verranno inviati a destinatari specifici del monitor.



=== Impostazione di azioni correttive o informazioni aggiuntive

È possibile aggiungere una descrizione facoltativa, nonché ulteriori approfondimenti e/o azioni correttive compilando la sezione *Aggiungi una descrizione dell'avviso*.  La descrizione può contenere fino a 1024 caratteri e verrà inviata insieme all'avviso.  Il campo approfondimenti/azioni correttive può contenere fino a 67.000 caratteri e verrà visualizzato nella sezione di riepilogo della landing page dell'avviso.

In questi campi è possibile fornire note, link o passaggi da seguire per correggere o altrimenti gestire l'avviso.

È possibile aggiungere qualsiasi attributo dell'oggetto (ad esempio, il nome dell'archivio) come parametro alla descrizione di un avviso.  Ad esempio, è possibile impostare i parametri per il nome del volume e il nome dell'archiviazione in una descrizione come: "Latenza elevata per volume: _%%relatedObject.volume.name%%_, Archiviazione: _%%relatedObject.storage.name%%_".

image:Monitors_Alert_Description.png["Azioni correttive e descrizione dell'avviso"]



=== Salva il tuo monitor

. Se lo si desidera, è possibile aggiungere una descrizione del monitor.
. Assegna al monitor un nome significativo e fai clic su *Salva*.
+
Il nuovo monitor viene aggiunto all'elenco dei monitor attivi.





== Elenco monitor

La pagina Monitor elenca i monitor attualmente configurati, mostrando quanto segue:

* Nome del monitor
* Stato
* Oggetto/metrica monitorata
* Condizioni del monitor


È possibile scegliere di sospendere temporaneamente il monitoraggio di un tipo di oggetto facendo clic sul menu a destra del monitor e selezionando *Pausa*.  Quando sei pronto a riprendere il monitoraggio, fai clic su *Riprendi*.

È possibile copiare un monitor selezionando *Duplica* dal menu.  È quindi possibile modificare il nuovo monitor e cambiare l'oggetto/la metrica, il filtro, le condizioni, i destinatari delle e-mail, ecc.

Se un monitor non è più necessario, è possibile eliminarlo selezionando *Elimina* dal menu.



== Gruppi di monitoraggio

Il raggruppamento consente di visualizzare e gestire i monitor correlati.  Ad esempio, è possibile avere un gruppo di monitoraggio dedicato all'archiviazione sul tenant oppure monitor rilevanti per un determinato elenco di destinatari.

image:Monitors_GroupList.png["Raggruppamento del monitor"]

Vengono mostrati i seguenti gruppi di monitor.  Il numero di monitor contenuti in un gruppo è visualizzato accanto al nome del gruppo.

* *Tutti i monitor* elenca tutti i monitor.
* *Monitor personalizzati* elenca tutti i monitor creati dall'utente.
* *Monitor sospesi* elencherà tutti i monitor di sistema sospesi da Data Infrastructure Insights.
* Data Infrastructure Insights mostrerà anche un numero di *Gruppi di monitoraggio del sistema*, che elencheranno uno o più gruppi dilink:task_system_monitors.html["monitor definiti dal sistema"] , inclusi i monitor di infrastruttura e carico di lavoro ONTAP .



NOTE: I monitor personalizzati possono essere messi in pausa, ripresi, eliminati o spostati in un altro gruppo.  I monitor definiti dal sistema possono essere messi in pausa e ripresi, ma non possono essere eliminati o spostati.



=== Monitor sospesi

Questo gruppo verrà visualizzato solo se Data Infrastructure Insights ha sospeso uno o più monitor.  Un monitor può essere sospeso se genera avvisi eccessivi o continui.  Se il monitor è personalizzato, modificare le condizioni per impedire l'avviso continuo, quindi riprendere il monitor.  Il monitor verrà rimosso dal gruppo Monitor sospesi quando il problema che causa la sospensione sarà risolto.



=== Monitor definiti dal sistema

Questi gruppi mostreranno i monitor forniti da Data Infrastructure Insights, a condizione che l'ambiente contenga i dispositivi e/o la disponibilità dei registri richiesti dai monitor.

I monitor definiti dal sistema non possono essere modificati, spostati in un altro gruppo o eliminati.  Tuttavia, è possibile duplicare un monitor di sistema e modificare o spostare il duplicato.

I monitor di sistema possono includere monitor per l'infrastruttura ONTAP (archiviazione, volume, ecc.) o carichi di lavoro (ad esempio monitor di log) o altri gruppi.  NetApp valuta costantemente le esigenze dei clienti e le funzionalità dei prodotti e, se necessario, aggiorna o aggiunge funzionalità ai monitor e ai gruppi di sistema.



=== Gruppi di monitor personalizzati

È possibile creare gruppi personalizzati in cui inserire i monitor in base alle proprie esigenze.  Ad esempio, potresti voler creare un gruppo per tutti i monitor correlati all'archiviazione.

Per creare un nuovo gruppo di monitor personalizzato, fare clic sul pulsante *"+" Crea nuovo gruppo di monitor*.  Inserisci un nome per il gruppo e clicca su *Crea gruppo*.  Viene creato un gruppo vuoto con quel nome.

Per aggiungere monitor al gruppo, vai al gruppo _Tutti i monitor_ (consigliato) ed esegui una delle seguenti operazioni:

* Per aggiungere un singolo monitor, fare clic sul menu a destra del monitor e selezionare _Aggiungi al gruppo_.  Selezionare il gruppo a cui aggiungere il monitor.
* Fare clic sul nome del monitor per aprire la vista di modifica del monitor e selezionare un gruppo nella sezione _Associa a un gruppo di monitor_.
+
image:Monitors_AssociateToGroup.png["Associare al gruppo"]



Per rimuovere i monitor, fare clic su un gruppo e selezionare _Rimuovi dal gruppo_ dal menu.  Non è possibile rimuovere i monitor dal gruppo _Tutti i monitor_ o _Monitor personalizzati_.  Per eliminare un monitor da questi gruppi, è necessario eliminare il monitor stesso.


NOTE: La rimozione di un monitor da un gruppo non elimina il monitor da Data Infrastructure Insights.  Per rimuovere completamente un monitor, selezionarlo e fare clic su _Elimina_.  In questo modo l'utente verrà rimosso anche dal gruppo a cui apparteneva e non sarà più disponibile per nessun altro utente.

È anche possibile spostare un monitor in un gruppo diverso nello stesso modo, selezionando _Sposta nel gruppo_.

Per mettere in pausa o riprendere contemporaneamente tutti i monitor di un gruppo, selezionare il menu del gruppo e fare clic su _Pausa_ o _Riprendi_.

Utilizzare lo stesso menu per rinominare o eliminare un gruppo.  L'eliminazione di un gruppo non elimina i monitor da Data Infrastructure Insights; sono comunque disponibili in _Tutti i monitor_.

image:Monitors_PauseGroup.png["Mettere in pausa un gruppo"]



== Monitor definiti dal sistema

Data Infrastructure Insights include una serie di monitor definiti dal sistema sia per le metriche che per i log.  I monitor di sistema disponibili dipendono dai collettori di dati presenti sul tenant.  Per questo motivo, i monitor disponibili in Data Infrastructure Insights potrebbero cambiare man mano che vengono aggiunti raccoglitori di dati o ne vengono modificate le configurazioni.

Visualizza illink:task_system_monitors.html["Monitor definiti dal sistema"] pagina per le descrizioni dei monitor inclusi in Data Infrastructure Insights.



=== Ulteriori informazioni

* link:task_view_and_manage_alerts.html["Visualizzazione e chiusura degli avvisi"]

