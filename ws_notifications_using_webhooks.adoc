---
sidebar: sidebar 
permalink: ws_notifications_using_webhooks.html 
keywords: alert, webhook, notification 
summary: Crea un webhook per le notifiche degli avvisi di sicurezza del carico di lavoro. 
---
= Notifiche di sicurezza del carico di lavoro tramite webhook
:hardbreaks:
:allow-uri-read: 
:nofooter: 
:icons: font
:linkattrs: 
:imagesdir: ./media/


[role="lead"]
I webhook consentono agli utenti di inviare notifiche di avviso critiche o di avvertimento a varie applicazioni utilizzando un canale webhook personalizzato.

Molte applicazioni commerciali supportano i webhook come interfaccia di input standard, ad esempio: Slack, PagerDuty, Teams e Discord.  Supportando un canale webhook generico e personalizzabile, Workload Security può supportare molti di questi canali di distribuzione.  Le informazioni sulla configurazione dei webhook sono disponibili sui siti web delle rispettive applicazioni.  Ad esempio, Slack forniscelink:https://api.slack.com/messaging/webhooks["questa guida utile"] .

È possibile creare più canali webhook, ognuno dei quali è destinato a uno scopo diverso, ad applicazioni separate, a destinatari diversi, ecc.

L'istanza del canale webhook è composta dai seguenti elementi

|===
| Nome | Descrizione 


| URL | URL di destinazione del webhook, incluso il prefisso http:// o https:// insieme ai parametri URL 


| Metodo | GET/POST - Il valore predefinito è POST 


| Intestazione personalizzata | Specifica qui eventuali intestazioni personalizzate 


| Corpo del messaggio | Inserisci qui il corpo del tuo messaggio 


| Parametri di avviso predefiniti | Elenca i parametri predefiniti per il webhook 


| Parametri e segreti personalizzati | I parametri e i segreti personalizzati consentono di aggiungere parametri univoci ed elementi sicuri come le password 
|===


== Creazione di un webhook

Per creare un webhook di sicurezza del carico di lavoro, vai su Amministrazione > Notifiche e seleziona la scheda "Webhook di sicurezza del carico di lavoro".  L'immagine seguente mostra un esempio di schermata di creazione di un webhook Slack.

Nota: per creare e gestire i webhook di Workload Security, l'utente deve essere un amministratore di Workload Security.

image:ws_webhook_slack_example.png["esempio di webhook slack per la sicurezza del carico di lavoro, larghezza=500"]

* Inserisci le informazioni appropriate per ciascun campo e fai clic su "Salva".
* Puoi anche cliccare sul pulsante "Test Webhook" per testare la connessione.  Si noti che in questo modo verrà inviato il "Corpo del messaggio" (senza sostituzioni) all'URL definito in base al metodo selezionato.
* I webhook SWS comprendono una serie di parametri predefiniti.  Inoltre, puoi creare parametri o segreti personalizzati.




== Parametri: cosa sono e come utilizzarli?

I parametri di avviso sono valori dinamici popolati per avviso.  Ad esempio, il parametro _%%severity%%_ verrà sostituito con il tipo di gravità dell'avviso.

Si noti che le sostituzioni non vengono eseguite quando si fa clic sul pulsante "Test Webhook"; il test invia un payload che mostra i segnaposto del parametro (_%%<param-name>%%_) ma non li sostituisce con i dati.



=== Parametri e segreti personalizzati

In questa sezione puoi aggiungere tutti i parametri personalizzati e/o segreti che desideri.  Un parametro personalizzato o un segreto può essere presente nell'URL o nel corpo del messaggio.  I segreti consentono all'utente di configurare un parametro personalizzato sicuro come password, apiKey ecc.

L'immagine di esempio seguente mostra come vengono utilizzati i parametri personalizzati nella creazione di webhook.

image:ws_webhook_parameters_example.png["webhook di sicurezza del carico di lavoro con parametri, larghezza=800"]



== Pagina elenco webhook sicurezza carico di lavoro

Nella pagina dell'elenco dei webhook vengono visualizzati i campi Nome, Creato da, Creato il, Stato, Sicuro e Ultimo segnalato.  Nota: il valore della colonna "stato" continuerà a cambiare in base al risultato dell'ultimo trigger del webhook.  Di seguito sono riportati alcuni esempi di risultati di stato.

|===


| Stato | Descrizione 


| OK | Notifica inviata correttamente. 


| 403 | Vietato. 


| 404 | URL non trovato. 


| 400  a| 
Brutta richiesta.  Potresti visualizzare questo stato se c'è un errore nel corpo del messaggio, ad esempio:

* JSON formattato male.
* Fornito valore non valido per le chiavi riservate.  Ad esempio, PagerDuty accetta solo informazioni critiche/avviso/errore/informazioni per "Gravità".  Qualsiasi altro risultato potrebbe comportare lo stato 400.
* Errori di convalida specifici dell'applicazione.  Ad esempio, Slack consente un massimo di 10 campi all'interno di una sezione.  Includerne più di 10 può comportare lo stato 400.




| 410 | La risorsa non è più disponibile 
|===
La colonna "Ultimo segnalato" indica l'ora in cui il webhook è stato attivato l'ultima volta.

Dalla pagina dell'elenco dei webhook gli utenti possono anche modificare/duplicare/eliminare i webhook.



== Configurare la notifica Webhook nel criterio di avviso

Per aggiungere una notifica webhook a un criterio di avviso, vai su -Sicurezza del carico di lavoro > Criteri- e seleziona un criterio esistente o aggiungine uno nuovo.  Nella sezione _Azioni_ > menu a discesa _Notifiche webhook_, seleziona i webhook richiesti.

image:ws_edit_attack_policy.png["Finestra di dialogo Modifica criterio di attacco che mostra il menu a discesa del webhook, larghezza=500"]

Le notifiche webhook sono collegate alle policy.  Quando si verifica l'attacco (RW/DD/WARN), verrà eseguita l'azione configurata (Scatta snapshot/blocco utente) e verrà quindi attivata la notifica webhook associata.

Nota: le notifiche e-mail sono indipendenti dalle policy e verranno attivate come di consueto.

* Se una policy viene sospesa, le notifiche webhook non verranno attivate.
* È possibile associare più webhook a una singola policy, ma si consiglia di non associarne più di 5.




=== Esempi di webhook sulla sicurezza del carico di lavoro

Webhook perlink:ws_webhook_example_slack.html["Slack"]

Webhook perlink:ws_webhook_example_pagerduty.html["PagerDuty"] Webhook perlink:ws_webhook_example_teams.html["Squadre"] Webhook perlink:ws_webhook_example_discord.html["Discordia"]
